/*!
* Verbatim.js 0.1.0
*
* Copyright 2014, nclud http://nclud.com
* Released under the GNU GPLv3 license
* http://www.gnu.org/licenses/gpl.html
*
* Built by Ramsay Lanier and Maxim Leyzerovich from nclud
*
* 
*/

!function(e){var t='<svg version="1.1" id="verbatimLogo" class="verbatim-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path fill="#FFFFFF" d="M9,10.1c-4,0.8-6.9,3.1-7.3,6.2c-0.2,1.8,0,3.7,1.1,5.2c1.5,2,3.2,3.1,6.2,2.8c1.5-0.1,1.7-1.4,1.1-1.6c-0.5-0.2-3.1-1.7-2.8-6c0.1-1.7,0.4-3.8,2.6-4.8C10.8,11.3,10,9.9,9,10.1z"/><path fill="#FFFFFF" d="M39.7,11.1c-1.5,9-6.9,16.3-10.8,23.2c-0.1,0.1-0.3,0.1-0.3-0.1c0.7-6.5,1.8-18,1.8-19.3s0.2-5.8-7.1-5.8s-11,3.2-11.8,7.3c-0.4,1.8,0.1,3.7,1.3,5.2c1.6,1.9,4.1,2.9,7.1,2.5c1.5-0.2,2-0.9,2-1.6c0-0.6-0.5-1.3-1.8-1.5c-0.5,0-2-0.2-2.1-3.1c0-1.3,0.3-2.2,1-2.9c0.7-0.7,1.4-1.2,2.9-1.1c1.5,0.1,1.7,1.4,1.7,2.1c0,0.6-1.3,21.6-0.3,26.2c0,0.1,0.1,0.1,0.1,0.1h7.8c0,0,0.1,0,0.1-0.1c3.6-5.1,15.2-25.4,16.7-31c0-0.1,0-0.2-0.1-0.2h-7.9C39.7,11,39.7,11.1,39.7,11.1z"/></svg>';var n='<svg version="1.1" id="twitterLogo" class="verbatim-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"> <path fill="#FFFFFF" d="M45,13.2c-1.4,0.6-2.9,1-4.5,1.2c1.6-1,2.8-2.5,3.4-4.3C42.4,11,40.8,11.7,39,12c-1.4-1.5-3.4-2.5-5.7-2.5c-4.3,0-7.8,3.5-7.8,7.8c0,0.6,0.1,1.2,0.2,1.8c-6.5-0.3-12.2-3.4-16-8.1c-0.7,1.1-1.1,2.5-1.1,3.9c0,2.7,1.4,5.1,3.5,6.5c-1.3,0-2.5-0.4-3.5-1c0,0,0,0.1,0,0.1c0,3.8,2.7,6.9,6.2,7.6c-0.7,0.2-1.3,0.3-2.1,0.3c-0.5,0-1,0-1.5-0.1c1,3.1,3.9,5.3,7.3,5.4c-2.7,2.1-6,3.3-9.7,3.3c-0.6,0-1.2,0-1.9-0.1c3.4,2.2,7.5,3.5,11.9,3.5c14.3,0,22.1-11.9,22.1-22.1c0-0.3,0-0.7,0-1C42.6,16.2,43.9,14.8,45,13.2z"/></svg>';var r,i;var s={highlightParent:true,searchContainer:"body",highlightedClass:"highlight",highlightColor:"#FFFF00",selectedClass:"verbatim-selected-text",buttonClass:"verbatim-button-container",animated:true,animationSpeed:2e3,scrollingOffset:200,allowImages:true};e.fn.verbatim=function(o){var u=this;var a=window.location.hash;a=a.replace("%C2%A0","%20");var f=decodeURIComponent(a).substr(1);var l=e.extend({},s,o);var c="";var h=false,p=false;var d,v;var m=false;var g=/Firefox/.test(navigator.userAgent);if(f.substr(0,5)=="image"){f=f.substr(7);m=true}e.fn.findHash=function(t,n){if(m&&n.allowImages){var r=e("img[src$='"+t+"']");r.addClass(n.highlightedClass);r.css({outline:"5px solid "+n.highlightColor})}else{var i=u.getSelected();i.collapse(document.body,0);while(window.find(t)){if(g){document.body.contentEditable="true";document.execCommand("HiliteColor",false,n.highlightColor);var s=i.focusNode.parentNode;e(s).addClass(n.highlightedClass);i.collapseToEnd();document.body.contentEditable="false"}else{document.designMode="on";document.execCommand("HiliteColor",false,n.highlightColor);var s=i.anchorNode.parentNode;e(s).addClass(n.highlightedClass);i.collapseToEnd();document.designMode="off"}}s=i.anchorNode.parentNode;e(s).addClass(n.highlightedClass)}if(n.animated){e(function(){e("html, body").animate({scrollTop:0},0)});e(window).load(function(){e("html, body").animate({scrollTop:e("."+n.highlightedClass).offset().top-parseInt(n.scrollingOffset)},parseInt(n.animationSpeed))})}if(n.highlightParent){e("."+n.highlightedClass).parent().addClass(n.highlightedClass)}};e.fn.getSelected=function(){if(window.getSelection)return window.getSelection();else if(document.getSelection)return document.getSelection();else{var e=document.selection&&document.selection.createRange();if(e.text){return e.text}return false}return false};e.fn.insertCopyButton=function(s){function p(){var t;e(h).addClass(l.selectedClass).append(o);if(i-r>15)t=0;else t=e(h).outerWidth()/2-e("."+l.buttonClass).width()/2;e("."+l.buttonClass).css({left:t})}e("."+l.buttonClass).remove();e(".verbatim-text-area").remove();if(l.allowImages&&e(s).is("img")&&!e(s).hasClass(l.selectedClass)){var o=document.createElement("div");o.setAttribute("class",l.buttonClass);o.innerHTML=t+n;var a=e(s).position();e(s).before(o);e(o).css({top:a.top,left:a.left});c="image: "+e(s).attr("src")}else if(!e(s).hasClass(l.selectedClass)){e("."+l.selectedClass).contents().unwrap();var o=document.createElement("div");o.setAttribute("class",l.buttonClass);o.innerHTML=t+n;var f=u.getSelected();if(!f.isCollapsed){if(g){document.body.contentEditable="true";document.execCommand("HiliteColor",false,l.highlightColor);var h=f.focusNode.parentNode;p();document.body.contentEditable="false"}else{document.designMode="on";document.execCommand("HiliteColor",false,l.highlightColor);var h=f.anchorNode.parentNode;p();document.designMode="off"}c=f.toString()}}};e.fn.copyURL=function(){e(".verbatim-text-area").remove();v=c;d=window.location.origin+window.location.pathname+"#"+encodeURIComponent(v);console.log(d);if(l.bitlyToken){e.getJSON("https://api-ssl.bitly.com/v3/shorten?",{access_token:l.bitlyToken,longUrl:d},function(e){if(e.status_code==200){d=e.data.url;u.generateLink()}})}else{d=window.location.origin+window.location.pathname+"#"+encodeURIComponent(v);u.generateLink()}};e.fn.generateLink=function(){if(h){if(v.length>112){v=v.substring(0,112)+"..."}v='"'+v+'"';var t=document.createElement("a");t.href="https://twitter.com/intent/tweet?url="+encodeURIComponent(d)+"&text="+encodeURIComponent(v);document.body.appendChild(t);t.click()}else{var n=document.createElement("textArea");n.setAttribute("class","verbatim-text-area");n.setAttribute("wrap","off");e("."+l.buttonClass).append(n);e(".verbatim-text-area").val(d);n.select()}};e(l.searchContainer).on("mousedown",function(e){r=e.offsetY});e(l.searchContainer).on("mouseup",function(t){i=t.offsetY;if(e(t.target).is("#verbatimLogo")){h=false;u.copyURL()}else if(e(t.target).is("#twitterLogo")){h=true;u.copyURL()}else if(e(t.target).hasClass("verbatim-text-area")){return false}else u.insertCopyButton(t.target)});if(f)u.findHash(f,l)}}(window.jQuery)